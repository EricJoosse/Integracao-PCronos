Manual para upgrade dos ambientes de produção de 2.6 para 2.6.1
===============================================================

0. Apenas no servidor do monitoramento:
	 - Conectar como cronostech
     - No Windows Explorer alterar a opção para exibir arquivos de sistema temporariamente

1. Renomear Job15a15minOfertamentoJava_Windows.bat para xJob15a15minOfertamentoJava_Windows.bat

2. Copiar o arquivo novo integr-fornecedor-2.6.1.jar do instalador para o servidor do fornecedor
 
3. Atualizar a chamada de integr-fornecedor-2.6.1.jar no xJob15a15minOfertamentoJava_Windows.bat 
   no servidor do fornecedor
 
 
4. Apenas no servidor da JR Distribuição: 
			- Editar /config/xxx.properties:             JR Embalagem -> JR Distribuição
			- Editar conteúdo manual TI manualmente:     JR Embalagem -> JR Distribuição
			- Copiar o conteúdo do .properties para o arquivo "Eclipse - Integração Fornecedor - Portal Cronos.2.6.1.properties.WinThor.JR_Distribuição.Producao"
			- Remover .properties antigos da JR Embalagem
			
			
5. Apenas no servidor da Prolac:
		- Corrigir Manual TI manualmente: substituir "Program Files" por "Program Files (x86)" 
		- Não precisa aumentar a versão do manual na Prolac pois na Prolac ainda não tem versão 2.6.1 do .jar instalado


6. Em todos os servidores de todos os fornecedores: 
			- Renomear o nome do arquivo do Manual TI manualmente: aumentar a versão para v1.4.3 (12.07.2018)
			- Editar o atalho no menu de Windows manualmente para apontar para o arquivo renomeado
			- Se precisar (depende da versão de Windows), renomear o atalho manualmente


7. Mover "DesinstalarManualTI.bat" de "Arquivos de Programas PC" 
   para "Arquivos de Programas PC/Integração Fornecedor - Portal Cronos/bin/"
   
8. Apagar "Desinstalação_Versão_Windows.bat"

9. Copiar do instalador para o servidor do fornecedor:
		- Desinstalar_Integração_Fornecedor_PortalCronos.bat
		- DesinstalarManualTI.bat
		- TestadorUnitario.bat

   Observação: 
		- Não copiar InstalarManualTI.bat do instalador para o servidor do fornecedor, 
		  pois o instalador remove isso também automaticamente no final da instalação


10. No caso do Prolac: 
			- remover diretório C:/"Program Files"/Java/jre1.8.0_92/bin/       por completo
			- remover diretório C:/"Program Files (x86)"/Java/jre1.8.0_92/bin/ por completo

   No caso de fornecedores diferente do Prolac: 
			- remover diretório C:/"Program Files"/Java/jre1.8.0_161/bin/       por completo
			- remover diretório C:/"Program Files (x86)"/Java/jre1.8.0_161/bin/ por completo


11. xJob15a15minOfertamentoJava_Windows.bat: 
     Substituir: 

REM Caminho completo para o caso que tiver 2 JRE´s no mesmo servidor,
REM e o caminho do outro JRE vem primeiro no PATH de DOS :
C:/"Program Files"/Java/jre1.8.0_92/bin/java.exe -cp integr-fornecedor-2.6.1.jar pcronos.integracao.fornecedor.IntegracaoFornecedorCompleta >> Job15a15minOfertamentoJava.log
REM Prolac: C:/"Program Files (x86)"/Java/jre1.8.0_161/bin/java.exe -cp integr-fornecedor-2.6.1.jar pcronos.integracao.fornecedor.IntegracaoFornecedorCompleta >> Job15a15minOfertamentoJava.log

     Por:
     
REM Caminho completo para o caso que tiver 2 JRE´s no mesmo servidor 
REM e o caminho do outro JRE está na primeira posição no PATH de DOS:

if exist C:/"Program Files (x86)"/Java/jre1.8.0_161/bin/java.exe (
    C:/"Program Files (x86)"/Java/jre1.8.0_161/bin/java.exe -cp integr-fornecedor-2.6.1.jar pcronos.integracao.fornecedor.IntegracaoFornecedorCompleta >> Job15a15minOfertamentoJava.log
) else if exist C:/"Program Files"/Java/jre1.8.0_92/bin/java.exe (
    C:/"Program Files"/Java/jre1.8.0_92/bin/java.exe -cp integr-fornecedor-2.6.1.jar pcronos.integracao.fornecedor.IntegracaoFornecedorCompleta >> Job15a15minOfertamentoJava.log
) else (
    echo MSGBOX "Erro! O JRE não foi encontrado!" > %temp%\TEMPmessage.vbs
    exit
)


12. xJob15a15minOfertamentoJava_Windows.bat: 
     Substituir: 

SETLOCAL
set path=C:\Program Files\Java\jre1.8.0_92\bin;%path%
REM Prolac: set path=C:\Program Files (x86)\Java\jre1.8.0_161\bin;%path%
REM         Errado em versões < 2.1.2B: set path=%path%;C:\Program Files\Java\jre1.8.0_161\bin
REM Prolac: Errado em versões < 2.1.2B: set path=%path%;C:\Program Files (x86)\Java\jre1.8.0_161\bin




     Por:
     
SETLOCAL

if exist C:/"Program Files (x86)"/Java/jre1.8.0_161/bin/java.exe (
    goto PathProlac
) else if exist C:/"Program Files"/Java/jre1.8.0_92/bin/java.exe (
    goto PathOutros
) else (
    echo MSGBOX "Erro! O JRE não foi encontrado!" > %temp%\TEMPmessage.vbs
    exit
)

:PathProlac
set path=C:\Program Files (x86)\Java\jre1.8.0_161\bin;%path%
REM         Errado em versões < 2.1.2B: set path=%path%;C:\Program Files (x86)\Java\jre1.8.0_161\bin
goto PularPathOutros
:PathOutros
set path=C:\Program Files\Java\jre1.8.0_92\bin;%path%
REM         Errado em versões < 2.1.2B: set path=%path%;C:\Program Files\Java\jre1.8.0_92\bin
:PularPathOutros


13. Apenas no caso do Prolac: 
    	- Executar TestadorUnitario.bat e verificar se o snippet qualquer funcionou: veja TestadorUnitario.log
		- Depois do teste, apagar TestadorUnitario.log
 
14. Renomear xJob15a15minOfertamentoJava_Windows.bat de volta para Job15a15minOfertamentoJava_Windows.bat

15. Apenas no caso de instalação no servidor do monitoramento: (já foi feito)
		- Alterar "Arquivos de Programas PC" de Hidden para Normal no usuário cronostech
		- Copiar TestadorUnitarioInstalacaoDesinstalacao.bat do instalador para o servidor do fornecedor
				- Descomentar: goto TesteAttrib
				- Apagar: attrib /S /D "Arquivos de Programas PC"
				- Executar como Administrador
				- Verificar se "Arquivos de Programas PC" ficou Hidden
				- Apagar TestadorUnitarioInstalacaoDesinstalacao.bat no servidor do fornecedor
				- No Windows Explorer alterar a opção para não exibir arquivos de sistema, 
				  porém pode exibir hidden files, para todos os usuários inclusive cronostech 
				- Verificar se o diretório "Arquivos de Programas PC" ficou invisível no Windows Explorer como deveria no usuário cronostech

16. Apenas no caso de instalação no servidor do monitoramento: 
     - No Windows Explorer voltar a opção para não exibir arquivos de sistema 

