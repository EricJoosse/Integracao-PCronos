Manual Upgrade dos Ambientes de Produção de 3.4.0 para 3.4.1 
============================================================

1. (i)   Apenas no caso dos servidores do Portal Cronos com o Monitorador instalado: 
         (servidor de aplicação, servidor de banco e servidor de banco de contingência):
           - Conectar como cronostech
 
   (ii)  Em todos os servidores dos fornecedores:
           - Verificar se o usuário logado é administrador ou administrator, 
             local ou da rede, abrindo e fechando cmd.exe (como administrador da rede ainda não foi testado).
             (Formaggio: user "techcorp")
 
   (ii) Em todos os servidores com versão do Integrador > 3.3.0:
           - Digitar "C:\Arquivos de Programas PC" na barra de endereços do Windows Explorer:
             (pois este diretório é "Hidden" e "Protected operating system file" desde a versão 3.3.0,
             e o arquivo de configuração foi para o menu de Windows)

                - No caso que isso talvez não é possível no Windows 2016 ou Windows 2020 ou em outra versão futura do Windows:
                  no Windows Explorer alterar a opção para exibir arquivos de sistema 
                  (desmarcar "Hide protected operating system files") temporariamente


2. Fazer exatamente na seguinte sequência:
   (i)   Em todos os casos exceto JR Distribuição / Windows 10:
         Verificar se o arquivo .bat e o .jar atual estão em uso: 
         verificar o horário da última e da próxima execução no Task Scheduler 
         e verificar no taskmgr.exe se o JRE está rodando ainda. 
         Esperar até o JRE terminou.
   
   (ii)  Em todos os casos (incluindo no caso JR Distribuição / Windows 10):
 		   - Adicionar "exit" seguida por uma linha em branco no início do arquivo 
 		     Job15a15min.bat no servidor do fornecedor. 
 		     (NÃO renomear Job15a15min.bat para evitar que o Scheduler 
              possivelmente se perde comprometendo os derrubamentos automáticos dos JRE´s travados)

   (iii) Apenas no caso de instalação no servidor da JR Distribuição (Windows 10):
	        a. Primeiro verificar no diretório C:\ProgramData\PortalCronos\Logs\Local\ 
	           se o Integrador está ofertando no momento e ficar esperando até ele terminar 
	           o último passo (a atualização do arquivo TemposExecução.log)
 
		    b. Matar o processo JRE 1.8.0_92
		 		 
		   
3. (i)  Copiar o arquivo novo integr-fornecedor-3.4.1.jar do instalador para o servidor do fornecedor.
   (ii) Apagar a versão anterior integr-fornecedor-*.*.*.jar.
 
4. (i)  Em todos os servidores: 
			- Atualizar o arquivo bin\Versao.bat no servidor do fornecedor.
			- Copiar bin\CaminhoJRE.bat do instalador para o servidor do fornecedor
   (ii) Em todos os servidores: 
			- Copiar os arquivos lib\hibernate-core-5.4.10.Final.jar, validation-api-2.0.1.Final.jar, hibernate-validator-6.1.1.Final.jar,
        	  javax.el-api-3.0.1-b06.jar, javax.el-2.2.6.jar,  e todos os jars dependentes 
        	  e também mybatis-3.4.5.jar para o servidor do fornecedor: ordenar o diretório \lib\ no Instalador no projeto Eclipse 
        	  por Date Modified e copiar todos os jars de 18.12.2019 08:24 e todos os jars posteriores. 
   (iii) Em todos os servidores:
   			- Remover jar´s antigas 

5. Apenas no caso do servidor de monitoramento dos Integradores e do servidor de aplicação:
   (i) Atualizar o arquivo tpl\"Email de tipo Virada fornecedor para produção.txt" no servidor do monitoramento.
 
6. Remover "exit" e a linha em branco no início do arquivo Job15a15min.bat
   no servidor do fornecedor (Sempre como último passo no AnyDesk para forçar 100 % conclusão do upgrade).

7. Apenas no caso que não foi possível no Windows 2016 ou Windows 2020 ou em outra versão futura do Windows
   digitar "C:\Arquivos de Programas PC" na barra de endereços do Windows Explorer:
     (i)  No Windows Explorer voltar a opção para não exibir arquivos de sistema 
          (marcar "Hide protected operating system files")
     (ii) Fechar o Windows Explorer e abrir novamente

8. Em todos os casos: 
     - Acompanhar 15 minutos se o Integrador começa executar automaticamente
     
9. Apenas no caso do servidor do monitoramento: 
     (i)  No Windows Explorer voltar a opção para não exibir arquivos de sistema 
          (marcar "Hide protected operating system files")
     (ii) Fechar o Windows Explorer e abrir novamente
     
     
10. (i)   Atualizar a versão do .jar no arquivo "FornecedorRepositorio.java" para o fornecedor que foi atualizado
    (ii)  Compilar o arquivo .jar
    (iii) Atualizar o arquivo .jar no servidor de monitoramento (não precisa atualizar o servidor do fornecedor)
          esperando o processamento atual terminar primeiro
   
