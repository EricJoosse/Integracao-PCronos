Manual Upgrade dos Ambientes de Produção de 2.8.2 para 2.8.3
============================================================

0. No arquivo "Desinstalar_Integração_Fornecedor_PortalCronos.bat":

   Substituir:
   
REM ================ Remover JRE: ========================================

wmic product where "name like 'Java 8 Update 92%%'" call uninstall /nointeractive


:FIM
   
   
   Por: 

REM Nunca mais remover o JRE, mesmo no caso o JRE foi instalado pela primeira vez pelo Portal Cronos, 
REM pois pode ser que depois disso outro sistema foi instalado que passou a usar o mesmo JRE:
goto SKIP_JRE

REM ================ Remover JRE: ========================================

REM Mais tarde parametrizar no Desinstalador se o usuário quiser desinstalar o JRE também sim/não, 
REM perguntando sem ele tem certeza, pois outros sistemas podem parar de funcionar. 
REM Não dar nem esta opção no caso que o JRE (1.8.0_92) não foi instalado pelo Portal Cronos 
REM porém o Portal Cronos tinha usado um JRE já existente instalado anteriormente por terceiros.
REM 
REM No caso, também parametrizar 'Java 8 Update 92, 111, 191, etc.'

wmic product where "name like 'Java 8 Update 92%%'" call uninstall /nointeractive

:SKIP_JRE

:FIM


1. Apenas no caso do servidor do monitoramento:
	 - Conectar como cronostech
     - No Windows Explorer alterar a opção para exibir arquivos de sistema 
       (desmarcar "Hide protected operating system files") temporariamente


2. Fazer exatamente na seguinte sequência:
   (i)   Em todos os casos exceto JR Distribuição / Windows 10:
         Verificar se o arquivo .bat e o .jar atual estão em uso: 
         verificar o horário da última e da próxima execução no Task Scheduler 
         e verificar no taskmgr.exe se o JRE está rodando ainda. 
         Esperar até o JRE terminou.
   
   (ii)  Em todos os casos (incluindo no caso JR Distribuição / Windows 10):
 		   - Adicionar "exit" seguida por uma linha em branco no início do arquivo 
 		     Job15a15minOfertamentoJava_Windows.bat no servidor do fornecedor. 
 		     (NÃO renomear Job15a15minOfertamentoJava_Windows.bat para evitar que o Scheduler 
              possivelmente se perde comprometendo os derrubamentos automáticos dos JRE´s travados)

   (iii) Apenas no caso de instalação no servidor da JR Distribuição (Windows 10):
	        a. Primeiro verificar no diretório C:\ProgramData\PortalCronos\Logs\Local\ 
	           se o Integrador está ofertando no momento e ficar esperando até ele terminar 
	           o último passo (a atualização do arquivo TemposExecução.log)
 
		    b. Matar o processo JRE 1.8.0_92
		 		 
		   
3. Copiar o arquivo novo integr-fornecedor-2.8.3.jar do instalador para o servidor do fornecedor.
   Apagar a versão anterior.
 
4. Atualizar as chamadas de integr-fornecedor-2.8.3.jar dentro do arquivo Job15a15minOfertamentoJava_Windows.bat 
   no servidor do fornecedor (2 ou 3 lugares).
 
5. Remover "exit" e a linha em branco no início do arquivo Job15a15minOfertamentoJava_Windows.bat
   no servidor do fornecedor

6. Em todos os casos: 
     - Acompanhar 15 minutos se o Integrador começa executar automaticamente
     
7. Atualizar as chamadas de integr-fornecedor-2.8.3.jar dentro do arquivo DesinstalarManualTI.bat
   no servidor do fornecedor (2 ou 3 lugares).

8. Atualizar as chamadas de integr-fornecedor-2.8.3.jar dentro do arquivo TestadorUnitario.bat
   no servidor do fornecedor (2 ou 3 lugares).

9. Apenas no caso do servidor do monitoramento: 
     - No Windows Explorer voltar a opção para não exibir arquivos de sistema (marcar "Hide protected operating system files")

10. (i)   Atualizar a versão do .jar no arquivo "FornecedorRepositorio.java" para o fornecedor que foi atualizado
    (ii)  Compilar o arquivo .jar
    (iii) Atualizar o arquivo .jar no servidor de monitoramento (não precisa atualizar o servidor do fornecedor)
   
   
